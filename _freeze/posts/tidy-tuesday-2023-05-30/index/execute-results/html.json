{
  "hash": "2f28d1f7763238aa6f8aba5907e68b73",
  "result": {
    "markdown": "---\ntitle: \"Tidy Tuesday (05/30/2023): Centenarians\"\nauthor: \"Dave Tirtariyadi\"\ndate: \"2023-05-30\"\ncategories: [tidy tuesday]\nexecute: \n  echo: true\n  message: false\n  warning: false\n  cache: true\n---\n\n\nIn this post, I analyze data on the oldest centenarians in the world! The main dataset was produced by frankiethull and can be found [here](https://github.com/rfordatascience/tidytuesday/tree/master/data/2023/2023-05-30).\n\nThe dataset contains the oldest 100 known verified male and female centenarians.\n\n\n::: {.cell hash='index_cache/html/load-data-pkgs_d7e359aa269ad857c38f1b0762cd26f1'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(skimr)\nlibrary(knitr)\nlibrary(kableExtra)\n\ncentenarians <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-05-30/centenarians.csv')\n\ntheme_set(theme_minimal())\nset.seed(123)\n```\n:::\n\n\nLet's skim the dataset first.\n\n\n::: {.cell hash='index_cache/html/skim-data_efd8793ba536bc71227ab733287bac3b'}\n\n```{.r .cell-code}\nskim(centenarians)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |             |\n|:------------------------|:------------|\n|Name                     |centenarians |\n|Number of rows           |200          |\n|Number of columns        |8            |\n|_______________________  |             |\n|Column type frequency:   |             |\n|character                |4            |\n|Date                     |2            |\n|numeric                  |2            |\n|________________________ |             |\n|Group variables          |None         |\n\n\n**Variable type: character**\n\n|skim_variable               | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:---------------------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|name                        |         0|             1|   9|  31|     0|      200|          0|\n|place_of_death_or_residence |         0|             1|   4|  25|     0|       34|          0|\n|gender                      |         0|             1|   4|   6|     0|        2|          0|\n|still_alive                 |         0|             1|   5|   8|     0|        2|          0|\n\n\n**Variable type: Date**\n\n|skim_variable | n_missing| complete_rate|min        |max        |median     | n_unique|\n|:-------------|---------:|-------------:|:----------|:----------|:----------|--------:|\n|birth_date    |         0|          1.00|1856-06-15 |1911-12-05 |1900-05-23 |      199|\n|death_date    |        12|          0.94|1968-03-21 |2023-04-17 |2014-01-02 |      186|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|   mean|    sd|     p0|    p25|    p50|    p75|   p100|hist  |\n|:-------------|---------:|-------------:|------:|-----:|------:|------:|------:|------:|------:|:-----|\n|rank          |         0|             1|  50.44| 28.90|   1.00|  25.75|  50.50|  75.25| 100.00|▇▇▇▇▇ |\n|age           |         0|             1| 114.06|  1.93| 111.46| 112.26| 114.57| 115.29| 122.45|▇▇▂▁▁ |\n:::\n:::\n\n\nWe see that there are eight variables in the dataset, including `place_of_death_or_residence`, `gender`, and `birth_date`.\n\nCool thing: the average age of the 100 oldest male and female centenarians is **114 years old**!\n\n# Exploratory data analysis\n\nLet's first talk a look at where the 100 oldest male and female centenarians come from.\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-3_b91b8fa5acb05082468feb753720684a'}\n\n```{.r .cell-code}\ntop_ten_country <- centenarians %>% \n  group_by(place_of_death_or_residence) %>% \n  count() %>% \n  arrange(desc(n)) %>% \n  head(10) %>% \n  rename(Country = place_of_death_or_residence, Count = n)\n\nkable(top_ten_country,\n      align = \"l\") %>% \n  kable_classic()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Country </th>\n   <th style=\"text-align:left;\"> Count </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> United States </td>\n   <td style=\"text-align:left;\"> 66 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Japan </td>\n   <td style=\"text-align:left;\"> 46 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> France </td>\n   <td style=\"text-align:left;\"> 9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Italy </td>\n   <td style=\"text-align:left;\"> 9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Spain </td>\n   <td style=\"text-align:left;\"> 9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> United Kingdom </td>\n   <td style=\"text-align:left;\"> 9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Brazil </td>\n   <td style=\"text-align:left;\"> 6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Canada </td>\n   <td style=\"text-align:left;\"> 5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Portugal </td>\n   <td style=\"text-align:left;\"> 5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mexico </td>\n   <td style=\"text-align:left;\"> 4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nWe see that the United States and Japan dominate the list of countries, accounting for more than half of the entire dataset of 200 centenarians! How about if we analyze on the continent-level?\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-4_2812d583eef88bf814b4143d9d3ffe39'}\n\n```{.r .cell-code}\nlibrary(countrycode)\nclean_continent <- centenarians %>% \n  mutate(\n    place_of_death_or_residence = case_when(\n      place_of_death_or_residence == \"France (French Guiana)\" ~ \"France\",\n      place_of_death_or_residence == \"France (Saint Barthélemy)\" ~ \"France\",\n      TRUE ~ place_of_death_or_residence\n    )\n  )\n\nclean_continent <- clean_continent %>% \n  mutate(\n    continent = \n      countrycode(\n        clean_continent$place_of_death_or_residence, \n        origin = \"country.name\", \n        destination = \"continent\")\n  )\n\nclean_continent %>% \n  ggplot(mapping = aes(y = fct_rev(fct_infreq(continent)))) + \n  geom_bar() +\n  labs(\n    title = \n      \"Continent Distribution of Centenarian Place of Death or Residence\",\n    subtitle = \"Most centenarians are from the Americas, Asia or Europe\",\n    y = \"Continent\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nLet's take a closer look at centenarians from the United States and Japan. What does the gender distribution look like?\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-5_47b8758be3af6557f009e374dd6381cc'}\n\n```{.r .cell-code}\ndata <- centenarians %>% \n  filter(place_of_death_or_residence %in% c(\"United States\", \"Japan\")) %>% \n  group_by(place_of_death_or_residence, gender) %>% \n  count()\n\npivot_data <- data %>%\n  pivot_wider(names_from = gender, values_from = n)\n```\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-6_249c3e7fcf557f43bdeda7b357ec6b21'}\n\n```{.r .cell-code}\ncentenarians %>% \n  ggplot(mapping = aes(x = birth_date)) +\n  geom_histogram(binwidth = 1500)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-7_f22072eca1e8b851caebbe06a20456c1'}\n\n```{.r .cell-code}\ncentenarians %>% \n  ggplot(mapping = aes(x = birth_date, y = age, color = still_alive)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}