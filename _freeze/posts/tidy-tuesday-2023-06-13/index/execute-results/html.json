{
  "hash": "54de8dcfc741dfc5bad417a1844fc8b3",
  "result": {
    "markdown": "---\ntitle: \"Tidy Tuesday (06/13/2023): SAFI survey data\"\nauthor: \"Dave Tirtariyadi\"\ndate: \"2023-06-13\"\ncategories: [tidy tuesday]\ndraft: true\nexecute: \n  message: false\n  warning: false\n  cache: true\n---\n\n::: {.cell hash='index_cache/html/load-data-pkgs_cf89cb95249bf05ff088ce25e4c4ff83'}\n\n```{.r .cell-code}\nsafi_data <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-06-13/safi_data.csv')\n\nlibrary(tidyverse)\nlibrary(skimr)\n```\n:::\n\n::: {.cell hash='index_cache/html/skim-data_51d4682ec6c67da649c0103806fefd0a'}\n\n```{.r .cell-code}\nskim(safi_data)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |          |\n|:------------------------|:---------|\n|Name                     |safi_data |\n|Number of rows           |131       |\n|Number of columns        |14        |\n|_______________________  |          |\n|Column type frequency:   |          |\n|character                |7         |\n|numeric                  |6         |\n|POSIXct                  |1         |\n|________________________ |          |\n|Group variables          |None      |\n\n\n**Variable type: character**\n\n|skim_variable        | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:--------------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|village              |         0|             1|   3|   8|     0|        3|          0|\n|respondent_wall_type |         0|             1|   6|  11|     0|        4|          0|\n|memb_assoc           |         0|             1|   2|   4|     0|        3|          0|\n|affect_conflicts     |         0|             1|   4|  10|     0|        5|          0|\n|items_owned          |         0|             1|   4| 136|     0|       96|          0|\n|months_lack_food     |         0|             1|   3|  46|     0|       31|          0|\n|instanceID           |         0|             1|  41|  41|     0|      131|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|  mean|    sd| p0|  p25| p50|   p75| p100|hist  |\n|:-------------|---------:|-------------:|-----:|-----:|--:|----:|---:|-----:|----:|:-----|\n|key_ID        |         0|             1| 85.47| 63.15|  1| 32.5|  66| 138.0|  202|▇▆▃▂▅ |\n|no_membrs     |         0|             1|  7.19|  3.17|  2|  5.0|   7|   9.0|   19|▆▇▅▁▁ |\n|years_liv     |         0|             1| 23.05| 16.91|  1| 12.0|  20|  27.5|   96|▇▅▂▁▁ |\n|rooms         |         0|             1|  1.74|  1.09|  1|  1.0|   1|   2.0|    8|▇▁▁▁▁ |\n|liv_count     |         0|             1|  2.37|  1.08|  1|  1.0|   2|   3.0|    5|▆▅▇▂▁ |\n|no_meals      |         0|             1|  2.60|  0.49|  2|  2.0|   3|   3.0|    3|▅▁▁▁▇ |\n\n\n**Variable type: POSIXct**\n\n|skim_variable  | n_missing| complete_rate|min        |max        |median     | n_unique|\n|:--------------|---------:|-------------:|:----------|:----------|:----------|--------:|\n|interview_date |         0|             1|2016-11-16 |2017-06-04 |2016-11-21 |       19|\n:::\n:::\n\n::: {.cell hash='index_cache/html/data-cleaning_541115c38865c3a5427e8cedc108faed'}\n\n```{.r .cell-code}\n# Convert character NULL's into NA\nsafi_data$affect_conflicts <- replace(\n  safi_data$affect_conflicts, \n  safi_data$affect_conflicts == \"NULL\", NA)\n\nsafi_data <- safi_data %>% \n  # Remove instanceID column\n  select(-instanceID) %>% \n  mutate(\n    # Factorize village column\n    village = factor(village),\n    # Factorize respondent_wall_type column\n    respondent_wall_type = factor(respondent_wall_type),\n    # Convert memb_assoc to logical values\n    memb_assoc = case_when(\n      memb_assoc == \"yes\" ~ TRUE,\n      memb_assoc == \"no\" ~ FALSE,\n      TRUE ~ NA\n    ),\n    # Factorize affect_conflicts column\n    affect_conflicts = factor(affect_conflicts)\n  )\nhead(safi_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 13\n  key_ID village interview_date      no_membrs years_liv respondent_wall_type\n   <dbl> <fct>   <dttm>                  <dbl>     <dbl> <fct>               \n1      1 God     2016-11-17 00:00:00         3         4 muddaub             \n2      1 God     2016-11-17 00:00:00         7         9 muddaub             \n3      3 God     2016-11-17 00:00:00        10        15 burntbricks         \n4      4 God     2016-11-17 00:00:00         7         6 burntbricks         \n5      5 God     2016-11-17 00:00:00         7        40 burntbricks         \n6      6 God     2016-11-17 00:00:00         3         3 muddaub             \n# ℹ 7 more variables: rooms <dbl>, memb_assoc <lgl>, affect_conflicts <fct>,\n#   liv_count <dbl>, items_owned <chr>, no_meals <dbl>, months_lack_food <chr>\n```\n:::\n:::\n\n::: {.cell hash='index_cache/html/itemize-data_ea60271547138f096681c35f25ef082a'}\n\n```{.r .cell-code}\nitems_df <- safi_data %>% \n  select(key_ID, items_owned) %>% \n  mutate(\n    items_owned = gsub(\"_\", \" \", items_owned)\n  ) %>% \n  separate_rows(items_owned, sep = \";\") %>% \n  unnest(items_owned)\n\nitems_df$items_owned <- replace(\n  items_df$items_owned, \n  items_df$items_owned == \"NULL\", NA)\n\nmonths_lack_food_df <- safi_data %>% \n  select(key_ID, months_lack_food) %>% \n  rename(month = months_lack_food) %>% \n  mutate(month = gsub(\";\", \" \", month)) %>% \n  separate_rows(month, sep = \" \") %>% \n  unnest(month)\n\nmonths_lack_food_df$month <- replace(\n  months_lack_food_df$month, \n  months_lack_food_df$month == \"none\", NA)\n\nmonths_lack_food_df$month <- str_sub(months_lack_food_df$month, start = 1, end = 3)\n\nunique(months_lack_food_df$month)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Jan\" \"Sep\" \"Oct\" \"Nov\" \"Dec\" \"Feb\" \"Mar\" \"Aug\" \"Jun\" \"Jul\" \"Apr\" \"May\"\n[13] NA   \n```\n:::\n\n```{.r .cell-code}\nmonths_lack_food_df$month = factor(months_lack_food_df$month, levels = month.abb)\n```\n:::\n\n::: {.cell hash='index_cache/html/most-owned-items_d0d0c292d14b6acbce4fb35238fd2d12'}\n\n```{.r .cell-code}\nitems_df %>% \n  drop_na() %>% \n  group_by(items_owned) %>% \n  count() %>% \n  mutate(items_owned = str_to_title(items_owned)) %>% \n  arrange(desc(n)) %>% \n  ggplot(mapping = aes(x = n, y = fct_reorder(items_owned, n))) + \n  geom_col() + \n  labs(\n    x = \"\",\n    y = \"\",\n    title = \"Most common items in Tanzania and Mozambique households\",\n    subtitle = \"Radio and mobile phone are the top two items found in households\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/most-owned-items-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/most-common-months_b43d9eda9fd65ade9e55ab91a7a2507a'}\n\n```{.r .cell-code}\nmonths_lack_food_df %>% \n  drop_na() %>% \n  group_by(month) %>% \n  count() %>% \n  ggplot(aes(x=month, y = n)) +\n  geom_col() +\n  labs(\n    y = \"\",\n    x = \"\",\n    title = \"Distribution of Months with Lack of Food\",\n    subtitle = \"Most families struggle to feed the household closer to the end of the year\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/most-common-months-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}